/*C3*/SET SCHEMA PUBLIC
DELETE FROM DIARY WHERE ID=466
INSERT INTO DIARY VALUES(466,'2018-01-10 11:03:09','<html dir="ltr"><head><meta content="text/html;charset=UTF-8">\u000a<style type="text/css">\u000a.ln { color: #606366; font-weight: normal; font-style: normal; }\u000a.s0 { color: rgb(169,183,198); }\u000a.s1 { color: rgb(204,120,50); font-weight: bold; }\u000a.s2 { color: rgb(169,183,198); }\u000a.s3 { color: rgb(106,135,89); }\u000a.s4 { color: rgb(98,151,85); font-style: italic; }\u000a</style>\u000a</head>\u000a<body contenteditable="true">\u000a<h1>\u041f\u0440\u0438\u043c\u0435\u0440 yaml-\u0444\u0430\u0439\u043b\u0430 Ansible \u0440\u0430\u0437\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f parity</h1>\u000a<hr>\u000a\u000a<div bgcolor="#2b2b2b">\u000a<table cellspacing="0" cellpadding="5" cols="1" width="100%" bgcolor="#606060">\u000a<tbody><tr><td><center>\u000a<font face="Arial, Helvetica" color="#000000">\u000aplay-parity.yml</font>\u000a</center></td></tr></tbody></table>\u000a<pre><span class="s0">- </span><span class="s1">hosts: </span><span class="s2">parity</span><span class="s0"> \u000a  </span><span class="s1">tasks:</span><span class="s0"> \u000a    - </span><span class="s1">name: </span><span class="s2">create parity directories</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">file:</span><span class="s0"> \u000a        </span><span class="s1">path: </span><span class="s3">"{{ parity_data_dir }}"</span><span class="s0"> \u000a        </span><span class="s1">state: </span><span class="s2">directory</span><span class="s0"> \u000a        </span><span class="s1">recurse: </span><span class="s2">yes</span><span class="s0"> \u000a        </span><span class="s1">mode: </span><span class="s2">0777</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">create parity directories</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">file:</span><span class="s0"> \u000a        </span><span class="s1">path: </span><span class="s3">"{{ parity_keys_dir }}"</span><span class="s0"> \u000a        </span><span class="s1">state: </span><span class="s2">directory</span><span class="s0"> \u000a        </span><span class="s1">recurse: </span><span class="s2">yes</span><span class="s0"> \u000a        </span><span class="s1">mode: </span><span class="s2">0777</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">create parity directories</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">file:</span><span class="s0"> \u000a        </span><span class="s1">path: </span><span class="s3">"{{ parity_config_dir }}"</span><span class="s0"> \u000a        </span><span class="s1">state: </span><span class="s2">directory</span><span class="s0"> \u000a        </span><span class="s1">recurse: </span><span class="s2">yes</span><span class="s0"> \u000a        </span><span class="s1">mode: </span><span class="s2">0777</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">copy task</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">copy: </span><span class="s2">src={{ item.src }} dest={{ item.dest }}</span><span class="s0"> \u000a      </span><span class="s1">with_items:</span><span class="s0"> \u000a        - { </span><span class="s1">src: </span><span class="s3">''files/config/node.toml''</span><span class="s0">,    </span><span class="s1">dest: </span><span class="s3">''{{ parity_config_dir }}/node.toml'' </span><span class="s0">} \u000a        - { </span><span class="s1">src: </span><span class="s3">''files/config/password.txt''</span><span class="s0">, </span><span class="s1">dest: </span><span class="s3">''{{ parity_config_dir }}/password.txt'' </span><span class="s0">} \u000a        - { </span><span class="s1">src: </span><span class="s3">''files/config/S7Alfa.json''</span><span class="s0">,  </span><span class="s1">dest: </span><span class="s3">''{{ parity_config_dir }}/S7Alfa.json'' </span><span class="s0">} \u000a        - { </span><span class="s1">src: </span><span class="s3">''files/config/peers.txt''</span><span class="s0">,    </span><span class="s1">dest: </span><span class="s3">''{{ parity_config_dir }}/peers.txt'' </span><span class="s0">} \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">print task</span><span class="s0"> \u000a      </span><span class="s1">debug: </span><span class="s2">var=item</span><span class="s0"> \u000a      </span><span class="s1">with_file:</span><span class="s0"> \u000a        - </span><span class="s3">''files/config/node.toml''</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">start parity</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">docker_container:</span><span class="s0"> \u000a        </span><span class="s1">name: </span><span class="s2">parity</span><span class="s0"> \u000a        </span><span class="s1">image: </span><span class="s2">docker.moscow.alfaintra.net/parity:v1.7.10</span><span class="s0"> \u000a        </span><span class="s1">restart: </span><span class="s2">yes</span><span class="s0"> \u000a        </span><span class="s1">command: </span><span class="s2">-lrpc=trace --config node.toml --force-ui --ui-no-validation </span><span class="s4">#--ws-origins all --ws-hosts all</span><span class="s0"> \u000a        </span><span class="s1">volumes:</span><span class="s0"> \u000a          - </span><span class="s3">"{{ parity_config_dir }}:/S7Alfa"</span><span class="s0"> \u000a          - </span><span class="s3">"{{ parity_data_dir }}:/S7Alfa/data"</span><span class="s0"> \u000a          - </span><span class="s3">"{{ parity_keys_dir }}:/S7Alfa/keys"</span><span class="s0"> \u000a        </span><span class="s1">network_mode: </span><span class="s2">host</span><span class="s0"> \u000a        </span><span class="s1">working_dir: </span><span class="s2">/S7Alfa</span><span class="s0"> \u000a        </span><span class="s1">ports:</span><span class="s0"> \u000a          - </span><span class="s3">"8540:8540"</span><span class="s0"> \u000a          - </span><span class="s3">"8080:8080"</span><span class="s0"> \u000a          - </span><span class="s3">"8180:8180"</span><span class="s0"> \u000a          - </span><span class="s3">"30300:30300"</span><span class="s0"> \u000a          - </span><span class="s3">"8545:8545"</span><span class="s0"> \u000a      </span><span class="s1">tags: </span><span class="s2">parity</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">create parity nginx config directory</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">file:</span><span class="s0"> \u000a        </span><span class="s1">path: </span><span class="s3">"{{ parity_nginx_dir }}"</span><span class="s0"> \u000a        </span><span class="s1">state: </span><span class="s2">directory</span><span class="s0"> \u000a        </span><span class="s1">recurse: </span><span class="s2">yes</span><span class="s0"> \u000a        </span><span class="s1">mode: </span><span class="s2">0777</span><span class="s0"> \u000a      </span><span class="s1">tags: </span><span class="s2">nginx</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">copy nginx config for parity</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">copy:</span><span class="s0"> \u000a        </span><span class="s1">src: </span><span class="s2">nginx/parity.conf</span><span class="s0"> \u000a        </span><span class="s1">dest: </span><span class="s3">"{{ parity_nginx_dir }}/parity.conf"</span><span class="s0"> \u000a      </span><span class="s1">tags: </span><span class="s2">nginx</span><span class="s0"> \u000a \u000a    - </span><span class="s1">name: </span><span class="s2">start nginx</span><span class="s0"> \u000a      </span><span class="s1">become: </span><span class="s2">yes</span><span class="s0"> \u000a      </span><span class="s1">docker_container:</span><span class="s0"> \u000a        </span><span class="s1">name: </span><span class="s2">nginx</span><span class="s0"> \u000a        </span><span class="s1">image: </span><span class="s2">nginx:1.10.2</span><span class="s0"> \u000a        </span><span class="s1">network_mode: </span><span class="s2">host</span><span class="s0"> \u000a        </span><span class="s1">restart: </span><span class="s2">yes</span><span class="s0"> \u000a        </span><span class="s1">volumes:</span><span class="s0"> \u000a          - </span><span class="s3">"/{{ parity_nginx_dir }}:/etc/nginx/conf.d"</span><span class="s0"> \u000a        </span><span class="s1">ports:</span><span class="s0"> \u000a          - </span><span class="s3">"80:80"</span><span class="s0"> \u000a      </span><span class="s1">tags: </span><span class="s2">nginx</span><span class="s0"> \u000a     \u000a</span></pre>\u000a</div>\u000a\u000a<div bgcolor="#2b2b2b">\u000a<table cellspacing="0" cellpadding="5" cols="1" width="100%" bgcolor="#606060">\u000a<tbody><tr><td><center>\u000a<font face="Arial, Helvetica" color="#000000">\u000ainv-integration</font>\u000a</center></td></tr></tbody></table>\u000a<pre><span class="s0">[parity] \u000ap2bdatar \u000a \u000a[oracle] \u000ap2bdata</span></pre>\u000a</div>\u000a\u000a<h2>\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u043a\u0438</h2><font face="Monospaced">\u000a&gt;ansible-playbook -i inv-integration play-parity.yml\u000a\u000a</font></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 yaml-\u0444\u0430\u0439\u043b\u0430 Ansible \u0440\u0430\u0437\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f parity')
COMMIT
DISCONNECT
