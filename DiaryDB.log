/*C3*/SET SCHEMA PUBLIC
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html><head><meta content="text/html;charset=UTF-8"/></head><body><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><hr/></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 493
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p><p><p><p><p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande"><br></font></p></p></p></p></p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662 now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667 now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668 now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669 now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675 now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675 now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679 now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682 is last now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a<p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662<td></td>now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667<td></td>now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668<td></td>now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669<td></td>now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675<td></td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675<td></td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679<td></td>now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682 is last<td></td>now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a<p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662</td><td>now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667</td><td>now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668</td><td>now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669</td><td>now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679</td><td>now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682 is last<td></td>now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a<p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662</td><td>now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667</td><td>now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668</td><td>now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669</td><td>now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679</td><td>now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682 is last</td><td>now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a<p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662</td><td></td><td>now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667</td><td></td<td>now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668</td><td></td<td>now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669</td><td></td<td>now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td></td<td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td></td<td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679</td><td></td<td>now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682</td><td>is last</td<td>now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a<p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662</td><td></td><td>now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667</td><td></td><td>now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668</td><td></td><td>now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669</td><td></td><td>now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td></td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td></td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679</td><td></td><td>now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682</td><td>is last</td><td>now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a<p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><p><font face="Lucida Grande"><br></font></p><p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u044b</font></p><p></p><p></p><p></p><p></p><p></p></body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
DELETE FROM DIARY WHERE ID=492
INSERT INTO DIARY VALUES(492,'2018-04-06 09:55:04','<html dir="ltr"><head><meta content="text/html;charset=UTF-8"></head><body contenteditable="true"><h1>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430</h1><p></p><p></p><p></p><p></p><p></p><hr><p><font face="Lucida Grande">\u0426\u0435\u043b\u044c\u044e \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c - \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0446\u0438\u043a\u043b\u0435 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043c\u0435\u0436\u0434\u0443 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u0438 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</font></p><p><font face="Lucida Grande">build.gradle</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div>buildscript {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ext {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;springBootVersion = <span style="color: #ce9178;">''2.0.0.RELEASE''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath(<span style="color: #ce9178;">"org.springframework.boot:spring-boot-gradle-plugin:</span><span style="color: #569cd6;">${</span>springBootVersion<span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div><br><div>apply plugin: <span style="color: #ce9178;">''java''</span></div><div>apply plugin: <span style="color: #ce9178;">''eclipse''</span></div><div>apply plugin: <span style="color: #ce9178;">''org.springframework.boot''</span></div><div>apply plugin: <span style="color: #ce9178;">''io.spring.dependency-management''</span></div><br><div>group = <span style="color: #ce9178;">''ru.alfabank.test''</span></div><div>version = <span style="color: #ce9178;">''0.0.1-SNAPSHOT''</span></div><div>sourceCompatibility = <span style="color: #b5cea8;">1.8</span></div><br><div>repositories {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()</div><div>}</div><br><br><div>dependencies {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;compile(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter''</span>,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ce9178;">''io.reactivex:rxjava:1.3.8''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;testCompile(<span style="color: #ce9178;">''org.springframework.boot:spring-boot-starter-test''</span>)</div><div>}</div></div><p><font face="Lucida Grande">RxTestApplication.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.SpringApplication;</div><div><span style="color: #569cd6;">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><br><div><span style="color: #4ec9b0;">@SpringBootApplication</span></div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RxTestApplication</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">main</span>(<span style="color: #4ec9b0;">String</span>[] <span style="color: #9cdcfe;">args</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">SpringApplication</span>.<span style="color: #dcdcaa;">run</span>(<span style="color: #9cdcfe;">RxTestApplication</span>.<span style="color: #9cdcfe;">class</span>, args);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestItem.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestItem</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">String</span>  <span style="color: #9cdcfe;">name</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #dcdcaa;">RestItem</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>, <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"name: "</span> + index + <span style="color: #ce9178;">" "</span> + time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">int</span> <span style="color: #dcdcaa;">getIndex</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setIndex</span>(<span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">index</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">index</span> = index;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">String</span> <span style="color: #dcdcaa;">getName</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #dcdcaa;">getTime</span>() {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setTime</span>(<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">time</span> = time;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">setName</span>(<span style="color: #4ec9b0;">String</span> <span style="color: #9cdcfe;">name</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = name;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestObservable.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestObservable</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Observable</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">protected</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">f</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">super</span>(f);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">RestSubscribe.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable.OnSubscribe;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><br><div><span style="color: #569cd6;">import</span> rx.Subscriber;</div><br><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">RestSubscribe</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">OnSubscribe</span>&lt;<span style="color: #4ec9b0;">RestItem</span>&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">int</span> <span style="color: #9cdcfe;">count</span> = <span style="color: #b5cea8;">0</span>;</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">@Override</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">call</span>(<span style="color: #4ec9b0;">Subscriber</span>&lt;<span style="color: #569cd6;">?</span> <span style="color: #569cd6;">super</span> <span style="color: #4ec9b0;">RestItem</span>&gt; <span style="color: #9cdcfe;">sri</span>) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">LocalDateTime</span> <span style="color: #9cdcfe;">time</span> = <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>();</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onNext</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestItem</span>(count++, time));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">sri</span>.<span style="color: #dcdcaa;">onCompleted</span>();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>}</div></div><p><font face="Lucida Grande">CommandLineRunnerBean.java</font></p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, ''Courier New'', monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: #569cd6;">package</span> ru.alfabank.test;</div><br><div><span style="color: #569cd6;">import</span> rx.Observable;</div><div><span style="color: #569cd6;">import</span> rx.schedulers.Schedulers;</div><br><div><span style="color: #569cd6;">import</span> java.time.LocalDateTime;</div><div><span style="color: #569cd6;">import</span> java.util.concurrent.TimeUnit;</div><br><div><span style="color: #569cd6;">import</span> org.springframework.boot.CommandLineRunner;</div><div><span style="color: #569cd6;">import</span> org.springframework.stereotype.Component;</div><br><div><span style="color: #4ec9b0;">@Component</span> </div><div><span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">CommandLineRunnerBean</span> <span style="color: #569cd6;">implements</span> <span style="color: #4ec9b0;">CommandLineRunner</span> {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">DELAY</span> = <span style="color: #b5cea8;">1L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">REPEAT</span> = <span style="color: #b5cea8;">17L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">static</span> <span style="color: #569cd6;">final</span> <span style="color: #4ec9b0;">long</span> <span style="color: #9cdcfe;">LIMIT</span> = <span style="color: #b5cea8;">7L</span>;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;</div><div>    <span style="color: #4ec9b0;">@Override</span> </div><div>    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">void</span> <span style="color: #dcdcaa;">run</span>(<span style="color: #4ec9b0;">String</span>... <span style="color: #9cdcfe;">arg0</span>) <span style="color: #569cd6;">throws</span> <span style="color: #4ec9b0;">InterruptedException</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #4ec9b0;">RestObservable</span> <span style="color: #9cdcfe;">obs</span> = <span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestObservable</span>(<span style="color: #c586c0;">new</span> <span style="color: #dcdcaa;">RestSubscribe</span>());</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">obs</span>.<span style="color: #dcdcaa;">delay</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">repeat</span>(<span style="color: #4ec9b0;">REPEAT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">takeWhile</span>(ri <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getIndex</span>() &lt; <span style="color: #4ec9b0;">LIMIT</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">else</span></div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">zipWith</span>(<span style="color: #9cdcfe;">Observable</span>.<span style="color: #dcdcaa;">interval</span>(<span style="color: #4ec9b0;">DELAY</span>, <span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>), (ri, i) <span style="color: #569cd6;">-&gt;</span> {</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">if</span>(i == <span style="color: #4ec9b0;">LIMIT</span> - <span style="color: #b5cea8;">1</span>)</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">setName</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" is last"</span>);</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ri;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;})</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribeOn</span>(<span style="color: #9cdcfe;">Schedulers</span>.<span style="color: #dcdcaa;">io</span>())</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color: #dcdcaa;">subscribe</span>(ri <span style="color: #569cd6;">-&gt;</span> <span style="color: #9cdcfe;">System</span>.<span style="color: #9cdcfe;">out</span>.<span style="color: #dcdcaa;">println</span>(<span style="color: #9cdcfe;">ri</span>.<span style="color: #dcdcaa;">getName</span>() + <span style="color: #ce9178;">" now: "</span> + <span style="color: #9cdcfe;">LocalDateTime</span>.<span style="color: #dcdcaa;">now</span>()));</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;</div><div>    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9cdcfe;">TimeUnit</span>.<span style="color: #9cdcfe;">SECONDS</span>.<span style="color: #dcdcaa;">sleep</span>(<span style="color: #b5cea8;">10</span>);</div><div>    }</div><div>}</div></div>\u000a\u000a<p><font face="Lucida Grande">\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430</font></p>\u000a<table border="1">\u000a<tr><td>name: 0 2018-04-06T09:39:50.662</td><td></td><td>now: 2018-04-06T09:39:51.667</td></rd>\u000a<tr><td>name: 1 2018-04-06T09:39:51.667</td><td></td><td>now: 2018-04-06T09:39:52.668</td></rd>\u000a<tr><td>name: 2 2018-04-06T09:39:52.668</td><td></td><td>now: 2018-04-06T09:39:53.669</td></rd>\u000a<tr><td>name: 3 2018-04-06T09:39:53.669</td><td></td><td>now: 2018-04-06T09:39:54.675</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td></td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 4 2018-04-06T09:39:54.675</td><td></td><td>now: 2018-04-06T09:39:55.679</td></rd>\u000a<tr><td>name: 5 2018-04-06T09:39:55.679</td><td></td><td>now: 2018-04-06T09:39:56.681</td></rd>\u000a<tr><td>name: 6 2018-04-06T09:39:56.682</td><td>is last</td><td>now: 2018-04-06T09:39:57.684</td></tr>\u000a</table>\u000a\u000a</body></html>','\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 RxJava \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430')
COMMIT
INSERT INTO LINK_DIARY_TAGS VALUES(492,12)
COMMIT
DISCONNECT
